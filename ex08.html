<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
<!-- CDN jquery------------------------------------------------- -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!-- -------------------------------------------------------------------- -->
<script>
    $(function(){
        //[1] 일반 이벤트 등록 : 객체.on('이벤트종류', 핸들러 함수)
        //[2] 단축 이벤트 등록 : 객체.click(핸들러함수)
        $('#bt').on('mouseover', function(){
            $(this).css('background','orange')
        }) //일반이벤트
        $('#bt').click(function(){
            alert('Hi')
        }) //단축이벤트
        $('#bt').mouseout(function(){
            $(this).css('background','')
        })
        /*  [문제1] #btOff를 클릭하면 이벤트 리스너가 동작하지 않게
                되어 #bt에 등록한 이벤트를 제거합시다.
                - off() : 등록된 모든 이벤트를 제거한다.
                - off('이벤트'): 특정한 이벤트를 제거
                - off('이벤트',함수): 특정 이벤트와 핸들러를 제거
      */
        $('#btOff').click(function(){
            $('#bt').off('click');
        })
        /* [문제2] #bt2를 클릭하면 '안녕하세요' h1태그 뒤에
         덧붙여주되, 딱 한번만 적용되도록 하세요
         - one('이벤트',이벤트핸들러) : 해당 이벤트가 한번만 동작함*/
        $('#bt2').one('click',function(){
            $('h1').append('<h3>안녕하세요</h3>')
                    .prepend('<h3>@</h3>')
        })

        /*[문제3] #g0을 클릭하면 텍스트 글자색을 흰색, 배경색은 navy로
          주세요.*/
        $('#g0').click(function(){
            $(this).css('color','white')
                    .css('backgroundColor','navy')
        })
        //g1에도해보면 href 링크기때문에 이동한다.
        //링크 이동을 막으려면 
        //[1]return false;를 하거나
        //[2]evt매개변수를 받고 .preventDefault()를 호출하는방법=> 연쇄적인 trigger행동을 중단(기본행동 취소)
        //[3]evt.StopPropagation()을 호출하는 방법. => 버블링 현상을 막는다.
    
        $('#g1').click(function(evt){
            $(this).css('color','white')
                    .css('backgroundColor','navy')
                    // return false;
                    evt.preventDefault();
        })

        //h1을 클릭하면 배경색을 #aeb로 주세요
        //자식에게 발생한 이벤트가 부모에게까지 발생한다=>이벤트 버블링
        //=> 이벤트 버블링을 막고자 한다면 "이벤트 객체".stopPropagation() 함수를 호출한다.
        $('h1').click(function(evt){
            console.log('h1 click')
            $(this).css('backgroundColor','#aeb')
            evt.stopPropagation();//버블링을 막는다.
        })
        //#pane1을 클릭하면 배경색 yellow로 주세요
        $('#panel').css('border', '1px solid red')
        $('#panel').click(function(){
            console.log('#pane1 click')
            $(this).css('backgroundColor','yellow')
            
        })
    })
</script>
</head>
<body>
    <h1>jQuery 이벤트 처리 및 버블링 막기</h1>
    <button id='bt'>확인</button>    
    <button id='btOff'>이벤트 제거(off)</button>
    <button id='bt2'>클릭 한번만(one)</button>
    
    <hr color='red'>
    
    <div id='panel'>
    <h1><a href="#g2" id='g0'>페이지 내에서 이동</a></h1>
    <h1><a href="http://www.google.com" id="g1">구글로 이동1</a></h1>     
    <h1><a href="http://www.google.com" id="g2">구글로 이동2</a></h1>           
    </div>
    <hr color="blue">
    <h1>jQuery 이벤트 강제 발생</h1>
    <h2>trigger()함수를 사용하면 이벤트를 강제로 발생 시킨다.</h2>
    <button id="b1">버튼1(버튼1을 누르면 버튼2를 누른 효과)</button>
    <button id="b2">버튼2</button>
    
    <script>
        $('#b1').click(function(){
            alert('hi b1')
            //선택자.trigger('이벤트') : 강제로 이벤트를 연쇄로 발생 시킨다.
            $('#b2').trigger('click')
        })
        $('#b2').click(function(){
            alert('bye b2')
        })
    </script>
</body>
</html>